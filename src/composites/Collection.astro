---
import Section from '@layouts/Section.astro'
import Wrapper from '@layouts/Wrapper.astro'
import { getCollection } from 'astro:content'
import CardWork from '@blocks/CardWork.astro'
import Anchor from '@atoms/Anchor.astro'

const
    {
        title, collection, padding,
        class: classes, ...props
    } = Astro.props,
    entries = await getCollection(collection, ({ data }) => {
        return import.meta.env.PROD ? data.isDraft !== true : true
    })
console.log(entries)
---
<Section
    component="collection"
    title={ title }
    padding={ padding }
    class:list="invisible"
    data-entry="below">
    <Wrapper x={ false }>
        <ul
            class:list={[
                `
                    col-span-full grid grid-cols-12 gap-6 md:gap-8
                    [&>*]:col-span-full [&>*]:md:col-span-6 [&>*]:xl:col-span-4
                `
            ]}>
            { entries.map((e: any) => (
                <li class="group/anchor">
                    <Anchor
                        href={ `/${e.collection}/${e.slug}` }
                        class:list="w-full">
                        <CardWork
                            title={ e.data.client.name }
                            color={ e.data.client.color }
                        />
                    </Anchor>
                </li>
            )) }
        </ul>
    </Wrapper>
</Section>