---
import Section from '@layouts/Section.astro'
import Wrapper from '@layouts/Wrapper.astro'
import CardPost from '@blocks/CardPost.astro'
import Anchor from '@atoms/Anchor.astro'
import TileGrid from '@layouts/TileGrid.astro'
import Tile from '@blocks/Tile.astro'
import _pastels from '@scripts/pastels'
import _shuffle from '@scripts/shuffle'

const
    {
        title, padding,
        class: classes, ...props
    } = Astro.props,
    blogs = await Astro.glob('@content/pages/blog/*.mdx'),
    pastels = _pastels().pastels(),
    shuffledPastels = _shuffle(pastels)

console.log(pastels)
---
<Section
    component="blogs"
    title={ title }
    padding={ padding }
    class:list="invisible"
    data-entry="below">
    <Wrapper x={ false }>
        <TileGrid>
            { blogs.map((e, idx) => (
                <Anchor href={ e.url }>
                    <Tile
                        obj={ e.frontmatter.title }
                        pastel={ shuffledPastels[idx] }
                        class:list="w-full"
                    />
                </Anchor>
            )) }
        </TileGrid>
    </Wrapper>
</Section>